<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Form8958 - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="TaxForm.html">TaxForm</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-compute">#compute</a>
    
    <li ><a href="#method-i-compute_8958_lines">#compute_8958_lines</a>
    
    <li ><a href="#method-i-compute_post">#compute_post</a>
    
    <li ><a href="#method-i-compute_split_forms">#compute_split_forms</a>
    
    <li ><a href="#method-i-enter_split">#enter_split</a>
    
    <li ><a href="#method-i-split_biographical">#split_biographical</a>
    
    <li ><a href="#method-i-split_form">#split_form</a>
    
    <li ><a href="#method-i-split_forms">#split_forms</a>
    
    <li ><a href="#method-i-update_managers">#update_managers</a>
    
    <li ><a href="#method-i-year">#year</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Form8958">
  <h1 id="class-Form8958" class="class">
    class Form8958
  </h1>

  <section class="description">
    
<p>ALLOCATION OF TAX AMOUNTS BETWEEN CERTAIN INDIVIDUALS IN COMMUNITY PROPERTY STATES</p>

<p>This form manages the division of community property tax forms between two spouses and then produces Form 8958 reflecting that division. To use it, create a <a href="FormManager.html"><code>FormManager</code></a> that contains all forms belonging to the community. Compute this form, which will create two submanagers for self and spouse, each having forms appropriately divided. Add any additional forms to those submanagers and compute the 1040 returns for each. Then call <a href="Form8958.html#method-i-compute_post"><code>compute_post</code></a> to actually fill in Form 8958 based on the completed returns.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="NAME">NAME
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-my_manager" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">my_manager</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-spouse_manager" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">spouse_manager</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(manager, my_m = nil, sp_m = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="TaxForm.html#method-c-new"><code>TaxForm::new</code></a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">manager</span>, <span class="ruby-identifier">my_m</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">sp_m</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">manager</span>)
  <span class="ruby-ivar">@my_manager</span> = <span class="ruby-identifier">my_m</span> <span class="ruby-operator">||</span> <span class="ruby-constant">FormManager</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@spouse_manager</span> = <span class="ruby-identifier">sp_m</span> <span class="ruby-operator">||</span> <span class="ruby-constant">FormManager</span>.<span class="ruby-identifier">new</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-compute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compute</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="compute-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compute</span>
  <span class="ruby-identifier">compute_split_forms</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compute_8958_lines" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compute_8958_lines</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Computes the Form 8958 contents. This is done after both spouses&#39; 1040 returns have been computed.</p>
          
          

          
          <div class="method-source-code" id="compute_8958_lines-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compute_8958_lines</span>
    
  <span class="ruby-comment"># Form 8958 biographical information</span>
  <span class="ruby-identifier">copy_line</span>(<span class="ruby-value">:first_name</span>, <span class="ruby-ivar">@my_bio</span>)
  <span class="ruby-identifier">copy_line</span>(<span class="ruby-value">:last_name</span>, <span class="ruby-ivar">@my_bio</span>)
  <span class="ruby-identifier">copy_line</span>(<span class="ruby-value">:ssn</span>, <span class="ruby-ivar">@my_bio</span>)
  <span class="ruby-identifier">line</span>[<span class="ruby-value">:spouse_first_name</span>] = <span class="ruby-ivar">@spouse_bio</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:first_name</span>]
  <span class="ruby-identifier">line</span>[<span class="ruby-value">:spouse_last_name</span>] = <span class="ruby-ivar">@spouse_bio</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:last_name</span>]
  <span class="ruby-identifier">line</span>[<span class="ruby-value">:spouse_ssn</span>] = <span class="ruby-ivar">@spouse_bio</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:ssn</span>]

  <span class="ruby-identifier">my_name</span> = <span class="ruby-node">&quot;#{line[:first_name]} #{line[:last_name]}&quot;</span>
  <span class="ruby-identifier">spouse_name</span> = <span class="ruby-node">&quot;#{line[:spouse_first_name]} #{line[:spouse_last_name]}&quot;</span>

  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;B.ssn&#39;</span>] = <span class="ruby-identifier">line</span>[<span class="ruby-value">:ssn</span>]
  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;C.ssn&#39;</span>] = <span class="ruby-identifier">line</span>[<span class="ruby-value">:spouse_ssn</span>]

  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&#39;W-2&#39;</span>, <span class="ruby-value">1</span>, <span class="ruby-value">:c</span>)
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">2</span>, <span class="ruby-string">&#39;1099-INT&#39;</span>, <span class="ruby-value">1</span>, <span class="ruby-value">:name</span>)
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">3</span>, <span class="ruby-string">&#39;1099-DIV&#39;</span>, <span class="ruby-string">&#39;1a&#39;</span>, <span class="ruby-value">:name</span>)
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">4</span>, <span class="ruby-string">&#39;1099-G&#39;</span>, <span class="ruby-value">2</span>, <span class="ruby-value">:payer</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">5</span>, <span class="ruby-value">:all</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;1065 Schedule K-1&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;B&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">x</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)[<span class="ruby-value">0</span>]
  }.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;1065 Schedule K-1&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;F&#39;</span>)).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>) }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">5</span>, <span class="ruby-string">&#39;1065 Schedule K-1&#39;</span>, <span class="ruby-value">14</span>)
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">5</span>, <span class="ruby-string">&#39;1099-MISC&#39;</span>, <span class="ruby-value">10</span>, <span class="ruby-value">:payer</span>)
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">5</span>, <span class="ruby-string">&#39;1099-NEC&#39;</span>, <span class="ruby-value">1</span>, <span class="ruby-value">:payer</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">6</span>, <span class="ruby-value">:all</span>] = <span class="ruby-identifier">my_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;II.1a&#39;</span>, <span class="ruby-value">:all</span>) <span class="ruby-operator">+</span> \
    <span class="ruby-identifier">spouse_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;II.1a&#39;</span>, <span class="ruby-value">:all</span>)
  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;6A&#39;</span>, <span class="ruby-value">:all</span>] = <span class="ruby-identifier">my_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;II.1h&#39;</span>, <span class="ruby-value">:all</span>) <span class="ruby-operator">+</span> \
    <span class="ruby-identifier">spouse_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;II.1h&#39;</span>, <span class="ruby-value">:all</span>)
  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;6B&#39;</span>, <span class="ruby-value">:all</span>] = <span class="ruby-identifier">my_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;II.1h&#39;</span>, <span class="ruby-value">:all</span>) <span class="ruby-operator">+</span> \
    <span class="ruby-identifier">spouse_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-constant">BlankZero</span> }
  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;6C&#39;</span>, <span class="ruby-value">:all</span>] = <span class="ruby-identifier">my_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-constant">BlankZero</span> } <span class="ruby-operator">+</span> \
    <span class="ruby-identifier">spouse_manager</span>.<span class="ruby-identifier">forms</span>(<span class="ruby-value">8949</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;II.1h&#39;</span>, <span class="ruby-value">:all</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">8</span>, <span class="ruby-value">:all</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;1065 Schedule K-1&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;B&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">x</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>)[<span class="ruby-value">0</span>]
  }.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;1065 Schedule K-1&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;F&#39;</span>)).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>) }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">8</span>, <span class="ruby-string">&#39;1065 Schedule K-1&#39;</span>, <span class="ruby-value">1</span>)

  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># Page 2</span>
  <span class="ruby-comment">#</span>

  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;B.ssn_2&#39;</span>] = <span class="ruby-identifier">line</span>[<span class="ruby-value">:ssn</span>]
  <span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;C.ssn_2&#39;</span>] = <span class="ruby-identifier">line</span>[<span class="ruby-value">:spouse_ssn</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">has_form?</span>(<span class="ruby-string">&#39;1040 Schedule SE&#39;</span>)
    <span class="ruby-identifier">my_se</span> = <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">form</span>(<span class="ruby-string">&#39;1040 Schedule SE&#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">my_se</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">my_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_tax</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">add_table_row</span>(
        <span class="ruby-value">9</span>     <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;Deduction for #{my_name}&quot;</span>,
        <span class="ruby-string">&#39;9A&#39;</span>  <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">my_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_ded</span>],
        <span class="ruby-string">&#39;9B&#39;</span>  <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">my_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_ded</span>],
        <span class="ruby-string">&#39;9C&#39;</span>  <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">BlankZero</span>,
        <span class="ruby-value">10</span>    <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;Tax for #{my_name}&quot;</span>,
        <span class="ruby-string">&#39;10A&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">my_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_tax</span>],
        <span class="ruby-string">&#39;10B&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">my_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_tax</span>],
        <span class="ruby-string">&#39;10C&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">BlankZero</span>,
      )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">has_form?</span>(<span class="ruby-string">&#39;1040 Schedule SE&#39;</span>)
    <span class="ruby-identifier">spouse_se</span> = <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">form</span>(<span class="ruby-string">&#39;1040 Schedule SE&#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">spouse_se</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">spouse_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_tax</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">add_table_row</span>(
        <span class="ruby-value">9</span>     <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;Deduction for #{spouse_name}&quot;</span>,
        <span class="ruby-string">&#39;9A&#39;</span>  <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">spouse_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_ded</span>],
        <span class="ruby-string">&#39;9B&#39;</span>  <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">BlankZero</span>,
        <span class="ruby-string">&#39;9C&#39;</span>  <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">spouse_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_ded</span>],
        <span class="ruby-value">10</span>    <span class="ruby-operator">=&gt;</span> <span class="ruby-node">&quot;Tax for #{spouse_name}&quot;</span>,
        <span class="ruby-string">&#39;10A&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">spouse_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_tax</span>],
        <span class="ruby-string">&#39;10B&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-constant">BlankZero</span>,
        <span class="ruby-string">&#39;10C&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">spouse_se</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:se_tax</span>],
      )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">11</span>, <span class="ruby-string">&#39;W-2&#39;</span>, <span class="ruby-value">2</span>, <span class="ruby-value">:c</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">12</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;W-2&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;c&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;State tax:\n#{x}&quot;</span> }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">12</span>, <span class="ruby-string">&#39;W-2&#39;</span>, <span class="ruby-value">17</span>)
  <span class="ruby-identifier">line</span>[<span class="ruby-value">12</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;State Tax&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;name&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-node">&quot;State tax:\n#{x}&quot;</span>
  }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">12</span>, <span class="ruby-string">&#39;State Tax&#39;</span>, <span class="ruby-string">&#39;amount&#39;</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">12</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;1098&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;lender&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-node">&quot;Home mortgage interest:\n#{x}&quot;</span>
  }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">12</span>, <span class="ruby-string">&#39;1098&#39;</span>, <span class="ruby-value">1</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">12</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;1098&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;lender&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-node">&quot;Real estate taxes:\n#{x}&quot;</span>
  }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">12</span>, <span class="ruby-string">&#39;1098&#39;</span>, <span class="ruby-value">10</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">12</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;Charity Gift&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;name&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-node">&quot;Gifts to charity:\n#{x}&quot;</span>
  }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">12</span>, <span class="ruby-string">&#39;Charity Gift&#39;</span>, <span class="ruby-string">&#39;amount&#39;</span>)

  <span class="ruby-identifier">line</span>[<span class="ruby-value">12</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;Estimated Tax&#39;</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-string">&#39;confirm&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-node">&quot;Estimated tax\nConfirmation #{x}&quot;</span>
  }
  <span class="ruby-identifier">enter_split</span>(<span class="ruby-value">12</span>, <span class="ruby-string">&#39;Estimated Tax&#39;</span>, <span class="ruby-string">&#39;amount&#39;</span>)

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compute_post" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compute_post</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="compute_post-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compute_post</span>
  <span class="ruby-identifier">compute_8958_lines</span>
  <span class="ruby-identifier">update_managers</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compute_split_forms" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compute_split_forms</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Splits up the input forms. The instance variable @splits records all the forms as split.</p>
          
          

          
          <div class="method-source-code" id="compute_split_forms-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compute_split_forms</span>
  <span class="ruby-comment"># Accounting for No Form records</span>
  <span class="ruby-ivar">@manager</span>.<span class="ruby-identifier">copy_no_forms</span>(<span class="ruby-ivar">@my_manager</span>)
  <span class="ruby-ivar">@manager</span>.<span class="ruby-identifier">copy_no_forms</span>(<span class="ruby-ivar">@spouse_manager</span>)

  <span class="ruby-comment"># Ensure that every form provided to the community is split in some way.</span>
  <span class="ruby-ivar">@all_forms</span> = <span class="ruby-ivar">@manager</span>.<span class="ruby-identifier">all_forms</span>
  <span class="ruby-ivar">@all_forms</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword">self</span>)

  <span class="ruby-identifier">split_biographical</span>

  <span class="ruby-comment"># Set up itemization and filing status for the submanagers</span>
  <span class="ruby-ivar">@itemize</span> = <span class="ruby-identifier">interview</span>(<span class="ruby-string">&#39;Do you want to itemize deductions?&#39;</span>)
  <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">interviewer</span>.<span class="ruby-identifier">answer</span>(<span class="ruby-string">&#39;Enter your filing status:&#39;</span>, <span class="ruby-string">&#39;mfs&#39;</span>)
  <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">interviewer</span>.<span class="ruby-identifier">answer</span>(<span class="ruby-string">&#39;Do you want to itemize deductions?&#39;</span>,
                                 <span class="ruby-ivar">@itemize</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;yes&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;no&#39;</span>)

  <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">interviewer</span>.<span class="ruby-identifier">answer</span>(<span class="ruby-string">&#39;Enter your filing status:&#39;</span>, <span class="ruby-string">&#39;mfs&#39;</span>)
  <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">interviewer</span>.<span class="ruby-identifier">answer</span>(<span class="ruby-string">&#39;Do you want to itemize deductions?&#39;</span>,
                                     <span class="ruby-ivar">@itemize</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;yes&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;no&#39;</span>)


  <span class="ruby-comment"># A table of all split_forms outputs</span>
  <span class="ruby-ivar">@splits</span> = {}
  <span class="ruby-node">%w(
    W-2 1099-INT 1099-DIV 1099-MISC 1099-NEC 1099-G 1099-B
    1065\ Schedule\ K-1 1098
    State\ Tax Charity\ Gift Estimated\ Tax
    Dependent Home\ Office
  )</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@splits</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">split_forms</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@all_forms</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;These forms were not accounted for in Form 8958 computation:&quot;</span>
    <span class="ruby-ivar">@all_forms</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">f</span>.<span class="ruby-identifier">name</span>) <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Unaccounted forms in 8958 processing&quot;</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-enter_split" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">enter_split</span><span
            class="method-args">(this_line, form_name, form_line, name_line = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Enters values for the A, B, and C columns. this_line is the line on Form 8958; form_name is the form from which values are to be drawn; form_line is the line from which values are to be drawn. If name_line is given, then values under that line are used as the identifier in the leftmost column.</p>
          
          

          
          <div class="method-source-code" id="enter_split-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 265</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">enter_split</span>(<span class="ruby-identifier">this_line</span>, <span class="ruby-identifier">form_name</span>, <span class="ruby-identifier">form_line</span>, <span class="ruby-identifier">name_line</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">split_forms</span> = <span class="ruby-ivar">@splits</span>[<span class="ruby-identifier">form_name</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">name_line</span>
    <span class="ruby-identifier">line</span>[<span class="ruby-identifier">this_line</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-identifier">form_name</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-identifier">name_line</span>, <span class="ruby-value">:all</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">line</span>[<span class="ruby-node">&quot;#{this_line}A&quot;</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">forms</span>(<span class="ruby-identifier">form_name</span>).<span class="ruby-identifier">lines</span>(<span class="ruby-identifier">form_line</span>, <span class="ruby-value">:all</span>)
  <span class="ruby-identifier">line</span>[<span class="ruby-node">&quot;#{this_line}B&quot;</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">split_forms</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">x</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">line</span>(<span class="ruby-identifier">form_line</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">BlankZero</span>
  }
  <span class="ruby-identifier">line</span>[<span class="ruby-node">&quot;#{this_line}C&quot;</span>, <span class="ruby-value">:add</span>] = <span class="ruby-identifier">split_forms</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">x</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">line</span>(<span class="ruby-identifier">form_line</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">BlankZero</span>
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-split_biographical" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">split_biographical</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="split_biographical-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">split_biographical</span>
  <span class="ruby-identifier">bios</span> = <span class="ruby-identifier">forms</span>(<span class="ruby-string">&#39;Biographical&#39;</span>)
  <span class="ruby-ivar">@my_bio</span> = <span class="ruby-identifier">bios</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:whose</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;mine&#39;</span> }
  <span class="ruby-ivar">@spouse_bio</span> = <span class="ruby-identifier">bios</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:whose</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;spouse&#39;</span> }
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Did not find both Biographical forms&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@my_bio</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@spouse_bio</span>

  <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-ivar">@my_bio</span>)
  <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-ivar">@spouse_bio</span>)

  <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-ivar">@my_bio</span>).<span class="ruby-identifier">line</span>[<span class="ruby-value">:whose</span>, <span class="ruby-value">:overwrite</span>] = <span class="ruby-string">&#39;spouse&#39;</span>
  <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-ivar">@spouse_bio</span>).<span class="ruby-identifier">line</span>[<span class="ruby-value">:whose</span>, <span class="ruby-value">:overwrite</span>] = <span class="ruby-string">&#39;mine&#39;</span>

  <span class="ruby-ivar">@all_forms</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@my_bio</span>)
  <span class="ruby-ivar">@all_forms</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@spouse_bio</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-split_form" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">split_form</span><span
            class="method-args">(f)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Splits a form between the two tax returns. The form is checked for two lines:</p>
<ul><li>
<p>whose: A value indicating that this form primarily belongs to self or</p>

<pre>spouse. A variety of indicator terms is permitted.</pre>
</li><li>
<p>split: A list of lines in the form for which numeric values are to be</p>

<pre>split between the two returns.</pre>
</li></ul>

<p>If no split value is given, then the form is copied to the return of the spouse indicated in the whose line. Otherwise, two copies of the form are made. For numeric-valued lines, the number is split evenly if the line is in split; otherwise it is solely distributed to the spouse in the whose line.</p>

<p>Returns a two-element array of the produced form for each return (nil being returned in one of the array slots if no form was produced for one spouse).</p>
          
          

          
          <div class="method-source-code" id="split_form-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">split_form</span>(<span class="ruby-identifier">f</span>)

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;whose&#39;</span>, <span class="ruby-value">:opt</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;me&#39;</span>, <span class="ruby-string">&#39;mine&#39;</span>, <span class="ruby-string">&#39;self&#39;</span>
    <span class="ruby-identifier">is_mine</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;spouse&#39;</span>, <span class="ruby-string">&#39;hers&#39;</span>, <span class="ruby-string">&#39;his&#39;</span>, <span class="ruby-string">&#39;theirs&#39;</span>, <span class="ruby-string">&#39;him&#39;</span>, <span class="ruby-string">&#39;her&#39;</span>, <span class="ruby-string">&#39;them&#39;</span>, <span class="ruby-string">&#39;spouse\&#39;s&#39;</span>
    <span class="ruby-identifier">is_mine</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid &#39;whose&#39; value in Form #{f.name}; use &#39;me&#39; or &#39;spouse&#39;&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;split&#39;</span>, <span class="ruby-value">:present</span>]

    <span class="ruby-identifier">my_form</span> = <span class="ruby-identifier">my_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-identifier">f</span>)
    <span class="ruby-identifier">spouse_form</span> = <span class="ruby-identifier">spouse_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-identifier">f</span>)
    <span class="ruby-identifier">split</span> = <span class="ruby-identifier">f</span>.<span class="ruby-identifier">line</span>[<span class="ruby-string">&#39;split&#39;</span>, <span class="ruby-value">:all</span>].<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_s</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">is_mine</span>
      <span class="ruby-identifier">zero_form</span> = <span class="ruby-identifier">spouse_form</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">zero_form</span> = <span class="ruby-identifier">my_form</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">line</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">l</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Numeric</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">split</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">l</span>.<span class="ruby-identifier">to_s</span>)
        <span class="ruby-identifier">my_form</span>.<span class="ruby-identifier">line</span>[<span class="ruby-identifier">l</span>, <span class="ruby-value">:overwrite</span>] <span class="ruby-operator">/=</span> <span class="ruby-value">2</span>
        <span class="ruby-identifier">spouse_form</span>.<span class="ruby-identifier">line</span>[<span class="ruby-identifier">l</span>, <span class="ruby-value">:overwrite</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">my_form</span>.<span class="ruby-identifier">line</span>[<span class="ruby-identifier">l</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">zero_form</span>.<span class="ruby-identifier">line</span>[<span class="ruby-identifier">l</span>, <span class="ruby-value">:overwrite</span>] = <span class="ruby-constant">BlankZero</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">split</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">my_form</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:cp_split!</span>] = <span class="ruby-string">&#39;X&#39;</span>
      <span class="ruby-identifier">spouse_form</span>.<span class="ruby-identifier">line</span>[<span class="ruby-value">:cp_split!</span>] = <span class="ruby-string">&#39;X&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">return</span> [ <span class="ruby-identifier">my_form</span>, <span class="ruby-identifier">spouse_form</span> ]

  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">is_mine</span>
    <span class="ruby-keyword">return</span> [ <span class="ruby-identifier">my_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-identifier">f</span>), <span class="ruby-keyword">nil</span> ]
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> [ <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">spouse_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-identifier">f</span>) ]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-split_forms" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">split_forms</span><span
            class="method-args">(form_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finds all forms of the given name, runs <a href="Form8958.html#method-i-split_form"><code>split_form</code></a> on them, and returns an array of the results. The return value is thus an array of two-element arrays of forms.</p>

<p>As a side effect, removes any identified forms from @all_forms, and if no forms of the given type are created for one of the spouses, no_form is called to indicate that no form of that type is present for that spouse.</p>
          
          

          
          <div class="method-source-code" id="split_forms-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">split_forms</span>(<span class="ruby-identifier">form_name</span>)
  <span class="ruby-identifier">res</span> = <span class="ruby-identifier">forms</span>(<span class="ruby-identifier">form_name</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@all_forms</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">f</span>)
    <span class="ruby-identifier">split_form</span>(<span class="ruby-identifier">f</span>)
  }
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:first</span>).<span class="ruby-identifier">all?</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:nil?</span>)
    <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">no_form</span>(<span class="ruby-identifier">form_name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:last</span>).<span class="ruby-identifier">all?</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:nil?</span>)
    <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">no_form</span>(<span class="ruby-identifier">form_name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">res</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_managers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_managers</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates the individual&#39;s <a href="FormManager.html"><code>FormManager</code></a> objects with relevant information, including copies of this Form 8958 itself.</p>
          
          

          
          <div class="method-source-code" id="update_managers-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 209</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_managers</span>
  <span class="ruby-ivar">@my_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-keyword">self</span>).<span class="ruby-identifier">exportable</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">sf</span> = <span class="ruby-ivar">@spouse_manager</span>.<span class="ruby-identifier">copy_form</span>(<span class="ruby-keyword">self</span>)
  <span class="ruby-identifier">sf</span>.<span class="ruby-identifier">exportable</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-node">%w(first_name last_name ssn)</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">sf</span>.<span class="ruby-identifier">line</span>[<span class="ruby-identifier">item</span>, <span class="ruby-value">:overwrite</span>] = <span class="ruby-identifier">line</span>[<span class="ruby-node">&quot;spouse_#{item}&quot;</span>]
    <span class="ruby-identifier">sf</span>.<span class="ruby-identifier">line</span>[<span class="ruby-node">&quot;spouse_#{item}&quot;</span>, <span class="ruby-value">:overwrite</span>] = <span class="ruby-identifier">line</span>[<span class="ruby-identifier">item</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-year" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">year</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="year-source">
            <pre><span class="ruby-comment"># File form8958.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">year</span>
  <span class="ruby-value">2020</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

